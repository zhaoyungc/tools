(function(){"use strict";var t={75364:function(t,e,a){function i(){let t=window.devicePixelRatio||1,e={width:window.screen.width*t,height:window.screen.height*t};const a=/iphone/gi.test(navigator.userAgent)&&(e.height>=2436||1792===e.height);return a}function s(t){let e="";t||(t=location.href);const a=t.split("?");e=a[1]?"?"+a[1]:"";const i={},s=new RegExp("([^?=&]+)(=([^&]*))?","g");return e.replace(s,(function(t,e,a,s){i[e]=s})),i}a.d(e,{a0:function(){return i},qI:function(){return s}})},3723:function(t,e,a){var i,s,n=a(85471),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page",attrs:{id:"app"}},[t.loaded?e("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":t.tabChange},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[e("el-tab-pane",{attrs:{name:"tab1",label:"基础配置"}},["tab1"==t.tabName?e("PageAll",{attrs:{configData:t.configData}}):t._e()],1),e("el-tab-pane",{attrs:{name:"tab2",label:"页面搭建"}},["tab2"==t.tabName?e("PageSee",{attrs:{config:t.configData.pageConfig,configData:t.configData}}):t._e()],1),e("el-tab-pane",{attrs:{name:"tab3",label:"高级功能"}},["tab3"==t.tabName?e("PageTree",{attrs:{config:t.configData.pageConfig,configData:t.configData}}):t._e()],1),e("el-tab-pane",{attrs:{name:"tab8",label:"批量更新"}},["tab8"==t.tabName?e("PageUpdate",{attrs:{configData:t.configData}}):t._e()],1),e("el-tab-pane",{attrs:{name:"tab4",label:"json"}},["tab4"==t.tabName?e("PageWrite",{attrs:{config:t.configData},on:{change:t.configChange}}):t._e()],1)],1):t._e(),e("div",{staticClass:"page_handle_btn"},[e("div",{staticClass:"row"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.toPreview()}}},[t._v("预览")])],1),e("div",{staticClass:"row"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.toSave()}}},[t._v("保存")])],1),e("div",{staticClass:"row"},[e("input",{ref:"copy_input",staticClass:"copy_input",attrs:{type:"text",value:""}}),e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.toCopyLink()}}},[t._v("复制链接")])],1)]),t.showLoginDialog?e("LoginDialog",{on:{ok:t.loginSuccess,cancel:t.toCancel}}):t._e()],1)},l=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_all_container page_container"},[e("div",{staticClass:"page_all"},[e("h3",[t._v(t._s(t.configData.all.name))]),t.configData.all.styleData&&Object.keys(t.configData.all.styleData).length>0?[e("EditForms",{attrs:{config:t.configData.all.styleData,title:"全局样式配置",configData:t.configData},on:{add:t.addChild,delete:t.deleteChild}})]:t._e(),t.configData.all.propsData&&Object.keys(t.configData.all.propsData).length>0?[e("EditForms",{attrs:{config:t.configData.all.propsData,title:"页面属性配置"}})]:t._e()],2)])},c=[],d=(a(44114),function(){var t=this,e=t._self._c;return e("div",{staticClass:"edit_template_label_container"},[e("span",[t._v(t._s(t.data.tip))]),t.data.info?e("el-tooltip",{attrs:{effect:"dark",content:t.data.info,placement:"top"}},[e("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.data.info)},slot:"content"}),e("i",{staticClass:"el-icon-question"})]):t._e()],1)}),p=[],u={name:"EditTemplateLabel",props:{data:{type:Object,default:()=>({})}},data:()=>({}),components:{},methods:{},computed:{},mounted(){}},h=u,m=a(81656),g=(0,m.A)(h,d,p,!1,null,"07f80883",null),f=g.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base_forms_container"},[e("div",{staticClass:"ct"},["color"==t.thisData.type?[e("el-input",{staticClass:"color_inp",attrs:{disabled:t.thisData.disable,size:"mini"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}}),t.thisData.disable?t._e():e("el-color-picker",{staticClass:"color_sel",attrs:{size:"mini"},model:{value:t.colorValue,callback:function(e){t.colorValue=e},expression:"colorValue"}}),!t.thisData.base&&!t.thisData.disable&&t.colorOption.length>0?e("el-select",{attrs:{placeholder:"请选择全局颜色",size:"mini"},model:{value:t.baseValue,callback:function(e){t.baseValue=e},expression:"baseValue"}},t._l(t.colorOption,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e()]:"number"==t.thisData.type?[e("el-input-number",{attrs:{disabled:t.thisData.disable,min:(t.thisData.ranges||[0,1e4])[0],max:(t.thisData.ranges||[0,1e4])[1],size:"mini"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}})]:"area"==t.thisData.type?[e("el-input",{staticClass:"text_inp",attrs:{type:"textarea",rows:2,disabled:t.thisData.disable,size:"mini"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}})]:"url"==t.thisData.type?[e("el-input",{staticClass:"url_inp",attrs:{disabled:t.thisData.disable,size:"mini"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}},[e("template",{slot:"prepend"},[t._v(t._s(t.thisData.titleTip||"页面链接"))])],2)]:"date"==t.thisData.type?[t.thisData.unit?e("el-date-picker",{staticClass:"date_inp",attrs:{disabled:t.thisData.disable,size:"mini",type:t.thisData.unit||"datetime","value-format":t.thisData.format||"yyyy/MM/dd",placeholder:"选择日期"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}}):e("el-date-picker",{staticClass:"date_inp",attrs:{disabled:t.thisData.disable,size:"mini",type:"datetime","value-format":t.dateValueFormt,placeholder:"选择日期时间"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}})]:"time"==t.thisData.type?[e("el-time-select",{staticClass:"date_inp",attrs:{disabled:t.thisData.disable,size:"mini",placeholder:"选择时间","picker-options":{start:"00:00",step:"00:30",end:"23:30"}},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}})]:"radio"==t.thisData.type?[e("el-radio-group",{attrs:{disabled:t.thisData.disable},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}},t._l(t.thisData.options,(function(a,i){return e("el-radio",{key:i,attrs:{label:a.value}},[t._v(" "+t._s(a.label)+" ")])})),1)]:"checkbox"==t.thisData.type?[e("el-checkbox-group",{attrs:{disabled:t.thisData.disable},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}},t._l(t.thisData.options,(function(a,i){return e("el-checkbox",{key:i,attrs:{label:a.value}},[t._v(" "+t._s(a.label)+" ")])})),1)]:"json"==t.thisData.type?[e("JsonEditor",{staticClass:"text_inp",attrs:{disabled:t.thisData.disable,type:0,width:"100%"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}})]:"image"==t.thisData.type?[e("el-input",{staticClass:"url_inp",attrs:{disabled:t.thisData.disable,size:"mini"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}}),t.thisData.disable?t._e():e("UploadImage",{staticClass:"upload_btn",on:{success:t.uploadSuccess}})]:"group"==t.thisData.type||"group_ids"===t.thisData.type?[e("el-input",{staticClass:"other_inp",attrs:{disabled:t.thisData.disable,size:"mini"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}}),e("button",{staticClass:"pick",on:{click:function(e){return t.doShowRankList(t.data)}}},[t._v("选择")])]:[e("el-input",{staticClass:"other_inp",attrs:{disabled:t.thisData.disable,size:"mini"},model:{value:t.thisData.value,callback:function(e){t.$set(t.thisData,"value",e)},expression:"thisData.value"}})]],2),"image"==t.thisData.type&&t.thisData.showSize?e("div",{staticClass:"image_msg"},[t._v("宽度: "+t._s(t.width)+", 高度："+t._s(t.height))]):t._e(),t.errorMsg?e("el-alert",{attrs:{title:t.errorMsg,type:"error"}}):t._e()],1)},v=[],y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"component_uploader"},[t.loading?e("i",{staticClass:"el-icon-loading icon"}):e("i",{staticClass:"el-icon-upload icon"})])},b=[],_={name:"UploadImage",data:()=>({loading:!1,size:0}),props:{},components:{},methods:{},mounted(){}},k=_,C=(0,m.A)(k,y,b,!1,null,"9f41264e",null),S=C.exports,w=function(){var t=this,e=t._self._c;return e("div",[e("JsonEditorVue",{style:{width:t.width},attrs:{mode:"text"},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}})],1)},x=[],O=a(9653),N={name:"JsonEditor",data:()=>({result:{}}),props:{value:null,type:{type:Number,default(){return 0}},width:{type:String,default(){return"600px"}}},watch:{result(t){try{t&&"string"===typeof t&&(0===this.type?this.$emit("input",t.replace(/\n/g,"")):this.$emit("input",JSON.parse(t)))}catch(e){}},value(t){try{this.result=t?"string"===typeof t?JSON.parse(t):t:{}}catch(e){}}},components:{JsonEditorVue:O.Ay},mounted(){try{"string"===typeof this.value?this.result=JSON.parse(this.value):this.result=this.value}catch(t){}}},P=N,I=(0,m.A)(P,w,x,!1,null,null,null),$=I.exports,A={name:"BaseForms",props:["data","pageAllStyle"],data:()=>({errorMsg:"",width:0,height:0,uploadUrl:"",size:0,thisData:{}}),components:{JsonEditor:$,UploadImage:S},methods:{doShowRankList(t){console.log(t)},uploadSuccess(t,e){this.thisData.value=t,this.uploadUrl=t,this.size=e&&e>0?parseInt(e/1024+""):0},checkErrorMsg(t){this.width=t.width,this.height=t.height,this.thisData.widths&&this.thisData.widths.length>=2&&(t.width<this.thisData.widths[0]||t.width>this.thisData.widths[1])&&(this.errorMsg="宽度范围 "+this.thisData.widths[0]+"～"+this.thisData.widths[1]+"(包含)"),this.thisData.sizes&&this.thisData.sizes.length>=2&&!this.errorMsg&&this.size&&this.size>0&&this.uploadUrl==this.thisData.value&&(this.size<this.thisData.sizes[0]||this.size>this.thisData.sizes[1])&&(this.errorMsg="大小范围 "+this.thisData.sizes[0]+"～"+this.thisData.sizes[1]+"(包含), 请压缩图片, 建议地址 https://tinypng.com/")},getImageSize(t){if(t){const e=new Image;e.src=t,this.errorMsg="",e.onerror=()=>{this.errorMsg="链接错误"},e.complete?this.checkErrorMsg(e):e.onload=()=>{this.checkErrorMsg(e)}}else this.width=0,this.height=0,this.size=0}},computed:{dateValueFormt(){return this.thisData.format?this.thisData.format:"year"==this.thisData.unit?"yyyy":"month"==this.thisData.unit?"yyyy/MM":"date"==this.thisData.unit?"yyyy/MM/dd":"yyyy/MM/dd HH:mm:ss"},colorValue:{get(){if(this.thisData.value.indexOf("#")<0){let t={};for(let e=0;e<this.colorOption.length;e++){const a=this.colorOption[e];if(a.value==this.thisData.value){t=a;break}}return t.color}return this.thisData.value},set(t){this.thisData.value=t}},baseValue:{get(){return this.thisData.value.indexOf("#")<0?this.thisData.value:""},set(t){this.thisData.value=t}},colorOption(){return this.pageAllStyle&&this.pageAllStyle.colorList&&this.pageAllStyle.colorList.value&&this.pageAllStyle.colorList.value.length>0?this.pageAllStyle.colorList.value.map((t=>({label:t.name.value,value:t.keys.value,color:t.color.value}))):[]}},mounted(){this.thisData={...this.data},"image"==this.thisData.type&&this.getImageSize(this.thisData.value),this.$watch("data",((t,e)=>{this.thisData=t})),this.$watch("thisData.value",((t,e)=>{this.errorMsg="","image"==this.thisData.type&&this.getImageSize(t),t!=this.data.value&&this.$emit("change",this.thisData)}))}},T=A,j=(0,m.A)(T,D,v,!1,null,"f1c36f8a",null),J=j.exports,L={name:"EditForms",props:{title:{type:String,default:()=>"配置项"},config:{type:Object,default:()=>({})},configData:{type:Object,default:()=>({})}},data:()=>({}),components:{BaseForms:J,EditTemplateLabel:f},computed:{getConfigAll(){return this.configData.all&&this.configData.all.styleData?JSON.parse(JSON.stringify(this.configData.all.styleData)):{}}},methods:{addChild(t,e){this.$emit("add",t,e)},deleteChild(t,e){this.$emit("delete",t,e)},dataChange(){this.$emit("change")},getChilds(t,e){if(!e)return[];if(!e.noDisplay){if(Object.hasOwnProperty.call(e,"tip")){const a=[t("EditTemplateLabel",{props:{data:e}})];if("array"==e.type||"arrayObject"==e.type){const i=e.value,s=[];i.forEach(((a,i)=>{const n=[this.getChilds(t,a)];if(!e.noMore&&(!e.disableStaticNum||e.disableStaticNum>0&&i>=e.disableStaticNum)){const a=[];e.value.length>(e.disableStaticNum||0)+1&&a.push(t("el-button",{props:{type:"primary",icon:"el-icon-minus",circle:!0,size:"mini"},on:{click:()=>{this.deleteChild(e,i)}}})),a.push(t("el-button",{props:{type:"primary",icon:"el-icon-plus",circle:!0,size:"mini"},on:{click:()=>{this.addChild(e,i)}}})),n.push(t("div",{class:"handle"},a))}s.push(t("div",{class:"content_item"},[n]))})),a.push(t("div",{class:"content"},s))}else e.value&&"object"==typeof e.value?a.push(t("div",{class:"content"},[this.getChilds(t,e.value)])):a.push(t("div",{class:"content"},[t("BaseForms",{props:{data:e,pageAllStyle:this.getConfigAll},on:{change:t=>{e.value=t.value,e.checkChange&&this.dataChange()}}})]));return[t("div",{class:"content_item"},a)]}{const a=[];for(const i in e)if(Object.hasOwnProperty.call(e,i)){const s=e[i];a.push(this.getChilds(t,s))}return a}}}},render(t){return t("div",{class:"edit_forms_container"},[t("el-divider",{props:{contentPosition:"left"}},[this.title]),t("div",{class:"content"},[...this.getChilds(t,this.config)])])}},M=L,z=(0,m.A)(M,i,s,!1,null,"3736664a",null),E=z.exports,q={name:"PageAll",props:{configData:{type:Object,default:()=>({})}},data:()=>({}),components:{EditForms:E},methods:{addChild(t,e){const a=t.value||[],i=JSON.parse(JSON.stringify(a[e]));for(const s in i)if(Object.hasOwnProperty.call(i,s)){const t=i[s];"keys"==t.type&&(t.value=s+"_"+(new Date).getTime()),"color"!=t.type||t.base||(t.base=!0)}a.splice(e+1,0,i),t.value=a},deleteChild(t,e){const a=t.value||[];a.splice(e,1),t.value=a}},computed:{},mounted(){}},U=q,K=(0,m.A)(U,r,c,!1,null,"48f126f3",null),V=K.exports,H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_see_container page_container"},[e("div",{staticClass:"edit_top"},[e("div",{staticClass:"phone_container"},[t._m(0),e("div",{staticClass:"phone_win_mask"},[e("div",{staticClass:"phone_win"},[e("PagePreview",{staticClass:"preview_content",style:t.pageStyle,attrs:{editType:"handle",config:t.config,configData:t.configData,evtId:t.$root.pageId},on:{select:t.handleSelect}})],1)])]),e("div",{staticClass:"handle_edit"},[e("div",{staticClass:"edit_container"},["edit"==t.showKind?e("PageSeeEdit",{attrs:{editData:t.editData,configData:t.configData},on:{delete:t.onDelete,deletechildList:t.resetShowIndex}}):t._e(),"add"==t.showKind?e("PageSeeAdd",{attrs:{title:t.addTitle,configData:t.configData,editModuleKind:t.editModuleKind},on:{select:t.onAddComplate}}):t._e()],1)])])])},F=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone_bg"},[e("img",{attrs:{src:"//www.metwo.cn/resource/phone.png"}})])}],B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_see_edit_container"},[e("el-alert",{attrs:{title:"title",type:"success",closable:!1}},[e("template",{slot:"title"},[t._v("选中内容："+t._s(t.editData.name))])],2),e("el-popover",{staticClass:"del_btn",attrs:{placement:"top",width:"240"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("p",[t._v("删除以后不可恢复，并且包含内部的内容会一块删除，但是可以重新添加，确定删除吗？")]),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:t.toDelete}},[t._v("确定")])],1),e("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[t._v("删除")])],1),e("br"),t.editData.propsData&&Object.keys(t.editData.propsData).length>0?[e("EditForms",{attrs:{config:t.editData.propsData,title:"参数配置",configData:t.configData},on:{add:t.addChild,delete:t.deleteChild,change:function(e){return t.onChange(t.editData.propsData)}}})]:t._e(),t.editData.extraData&&Object.keys(t.editData.extraData).length>0?[e("EditForms",{attrs:{config:t.editData.extraData,title:"自定义参数配置",configData:t.configData},on:{add:t.addChild,delete:t.deleteChild,change:function(e){return t.onChange(t.editData.extraData)}}})]:t._e(),t.editData.eventData&&Object.keys(t.editData.eventData).length>0?[e("EditForms",{attrs:{config:t.editData.eventData,title:"组件内部交互数据配置",configData:t.configData},on:{add:t.addChild,delete:t.deleteChild,change:function(e){return t.onChange(t.editData.eventData)}}})]:t._e(),t.editData.requestData&&Object.keys(t.editData.requestData).length>0?[e("EditForms",{attrs:{config:t.editData.requestData,title:"请求配置",configData:t.configData},on:{add:t.addChild,delete:t.deleteChild}})]:t._e()],2)},R=[],W={name:"PageSeeEdit",props:["editData","configData"],data:()=>({visible:!1}),components:{EditForms:E},methods:{getCleanDom(t){if("container"==t.kind)t.propsData.children.value.map((t=>this.getCleanDom(t)));else if("tab"==t.kind){const e=t.propsData.tabsConfig.value||[];e.forEach((t=>{t.children.value.map((t=>this.getCleanDom(t)))}))}else t.children&&t.children.value.map((t=>this.getCleanDom(t)));return t},addChild(t,e){const a=t.value||[],i=JSON.parse(JSON.stringify(a[e]));a.splice(e+1,0,this.getCleanDom(i)),t.value=a},deleteChild(t,e){const a=t.value||[];a.splice(e,1),console.log(t,"==",this.editData),this.editData.disableData.normalIndex>=0&&this.editData.disableData.normalIndex>=a.length&&this.$emit("deletechildList"),t.value=a},toDelete(){this.visible=!1,this.$emit("delete")},onChange(t){this.editData&&this.editData.contactChange&&this.editData.contactChange(t)}}},G=W,Q=(0,m.A)(G,B,R,!1,null,"6c828763",null),X=Q.exports,Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_see_add_container"},[e("el-alert",{attrs:{title:t.title,type:"success",closable:!1}}),e("el-tabs",{staticClass:"card_tab",attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t._l(t.normalConfig,(function(a,i,s){return[a.noDisplay?t._e():e("el-tab-pane",{key:s,attrs:{label:a.name,name:i}},[a.info?e("el-alert",{attrs:{title:a.info,closable:!1,type:"warning"}}):t._e(),i==t.activeName?t._l(a.childs,(function(i,s,n){return e("div",{key:n,staticClass:"child_name"},[i.noDisplay?t._e():[e("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(i.moduleName))]),e("div",{staticClass:"preview_ct",on:{click:function(e){return t.toClick(a,i)}}},[e("div",{staticClass:"preview_scale",style:t.previewStyle},[e("AddPreview",{attrs:{componentsName:a.componentsName,config:i,configData:t.configData}})],1)])]],2)})):t._e()],2)]}))],2)],1)},Z=[],tt=a(3866);function et(t){if(t.all&&t.all.styleData){const e=(t.all.styleData.pageBackageColor||{}).value,a=(t.all.styleData.colorList||{}).value||[];if(e){if(0==e.indexOf("#"))return e;if(0==e.indexOf("keys")){let t="";for(let i=0;i<a.length;i++){const s=a[i]||{};if((s.keys||{}).value==e){t=(s.color||{}).value;break}}return t}}}return""}var at=a(73441),it=a(16858);function st(t={}){if(t.constructor==Array){const e=[];return(t||[]).forEach((t=>{e.push(st(t))})),e}if(t.propsData)return{type:t.type,kind:t.kind,disableData:t.disableData||{},styleData:t.styleData&&st(t.styleData),propsData:t.propsData&&st(t.propsData),eventData:t.eventData&&st(t.eventData),requestData:t.requestData&&st(t.requestData),extraData:t.extraData&&st(t.extraData)};{const e={};for(const a in t)Object.hasOwnProperty.call(t,a)&&("array"==t[a].type?e[a]=st(t[a].value):"arrayObject"==t[a].type?e[a]=t[a].value.map((t=>t.value)):"object"==t[a].type?e[a]=st(t[a].value):t[a].constructor==Array?e[a]=st(t[a]):e[a]=t[a].value);return e}}function nt(t={},e,a,i){if(i){const a=JSON.parse(JSON.stringify(e));for(const e in t)if(Object.hasOwnProperty.call(t,e)&&a[e])if("array"==a[e].type){const i=[],s=t[e]||[];s.forEach((t=>{const s=JSON.parse(JSON.stringify(a[e].value[0]||{}));for(const e in t)s[e].value=t[e],s[e].rebaseTypeKeys&&t[s[e].rebaseTypeKeys]&&(s[e].type=t[s[e].rebaseTypeKeys]);"json"==t.cusType&&(s.value.value=t.value),i.push(s)})),a[e].value=i}else{const i=t[e]||{},s=JSON.parse(JSON.stringify(a[e].value||{}));for(const t in i)s[t].value=i[t],s[t].rebaseTypeKeys&&i[s[t].rebaseTypeKeys]&&(s[t].type=i[s[t].rebaseTypeKeys]);"json"==i.cusType&&(s.value.value=i.value),a[e].value=s}return a}if(t.kind&&t.type){const e=a[t.kind],i=e.childs[t.type];if(i){const s=JSON.parse(JSON.stringify(i)),n={name:e.name,kind:e.kind,componentsName:e.componentsName,type:s.type,moduleName:s.moduleName||"",disableData:{...s.disableData,...t.disableData},styleData:s.styleData,propsData:s.propsData,extraData:s.extraData,eventData:s.eventData,requestData:s.requestData,contactChange:e.contactChange||null,treeSelectMask:!1};return{...n,styleData:n.styleData&&nt(t.styleData,n.styleData,a),propsData:n.propsData&&nt(t.propsData,n.propsData,a),eventData:n.eventData&&nt(t.eventData,n.eventData,a),requestData:n.requestData&&nt(t.requestData,n.requestData,a),extraData:n.extraData&&nt(t.extraData,n.extraData,a,!0)}}return{}}if(t.propsData){const i=JSON.parse(JSON.stringify(e));return{...i,styleData:i.styleData&&nt(t.styleData,i.styleData,a),propsData:i.propsData&&nt(t.propsData,i.propsData,a),eventData:i.eventData&&nt(t.eventData,i.eventData,a),requestData:i.requestData&&nt(t.requestData,i.requestData,a),extraData:i.extraData&&nt(t.extraData,i.extraData,a,!0)}}if("{}"==JSON.stringify(t))return JSON.parse(JSON.stringify(e));{const i=JSON.parse(JSON.stringify(e));for(const e in t)if(Object.hasOwnProperty.call(t,e)&&i[e])if(t[e]&&t[e].constructor==Array)if("checkbox"==i[e].type)i[e].value=t[e];else{const s=[];t[e].forEach((t=>{if(i[e].value[0])if("arrayObject"==i[e].type){const a=JSON.parse(JSON.stringify(i[e].value[0]));a.value=t,s.push(a)}else s.push(nt(t,i[e].value[0],a));else s.push(nt(t,a,a))})),i[e].value=s}else"object"==i[e].type?i[e].value=nt(t[e],i[e].value,a):0===t[e]?i[e].value=0:i[e].value=t[e]||"";return i}}function ot(t,e,a){const i=it.A.getConfig(e,a),s=t||{};if(t.all){const e=(t.all.styleData||{}).colorList||[];if(0==e.length)t.all.styleData={...t.all.styleData,colorList:st(i.styleData).colorList};else if(e.length>0){const a=e,s=st(i.styleData).colorList;a.forEach((t=>{let e=!1;s.forEach((a=>{a.keys==t.keys&&(a.name=t.name,a.color=t.color,e=!0)})),e||s.push({...t,name:t.name})})),t.all.styleData={...t.all.styleData,colorList:s}}s.all=nt(t.all,i,{})}else s.all=i;if(t.pageConfig){const e=tt.A.getConfig(),a=[];t.pageConfig.forEach((t=>{a.push(nt(t,e,e))})),s.pageConfig=a}else s.pageConfig=[];return s.staticData=t.staticData||{},s}function lt(t){const e=st(t.all),a={all:e,pageConfig:st(t.pageConfig),staticData:{...t.staticData,saveTimes:(new Date).getTime()}};return a}function rt(t,e,a=0){}function ct(t){const e=[],a=t.all.propsData||{};return a.page_title.value||e.push("请添加简单的页面标题"),e}var dt={name:"AddPreview",props:{config:{type:Object,default:{}},componentsName:{type:String,default:""},configData:{type:Object,default:{}}},components:{...at.A},computed:{colorList(){return this.configData.all?st(this.configData.all.styleData.colorList.value):[]}},data:()=>({}),methods:{getResetColorValue(t){const e=JSON.parse(JSON.stringify(t));if(e&&"object"==typeof e)if(e.constructor==Object){for(const t in e)Object.hasOwnProperty.call(e,t)&&"object"==typeof e[t]&&(e[t]=this.getResetColorValue(e[t]));if("color"==e.type&&e.value.indexOf("#")<0){let t={};for(let a=0;a<this.colorList.length;a++){const i=this.colorList[a];if(i.keys==e.value){t=i;break}}t.color&&(e.value=t.color)}}else if(e.constructor==Array){let t=[];return e.forEach((e=>{t.push(this.getResetColorValue(e))})),t}return e}},render(t){return this.componentsName?t(this.componentsName,{props:{type:this.config.type,editType:"select",staticData:{data:{evt_id:this.evtId||"0"},disableData:this.config.disableData,propsData:st(this.getResetColorValue(this.config.propsData)),eventData:st(this.config.eventData),requestData:st(this.config.requestData)}},style:{}}):null}},pt={name:"PageSeeAdd",props:["title","configData","editModuleKind"],data:()=>({activeName:"rule"}),components:{AddPreview:dt},methods:{toClick(t,e){const a={name:t.name,kind:t.kind,componentsName:t.componentsName,type:e.type,moduleName:e.moduleName||"",disableData:e.disableData,propsData:e.propsData,extraData:e.extraData,eventData:e.eventData,requestData:e.requestData,treeSelectMask:!1},i=JSON.parse(JSON.stringify(a));if(i.contactChange=t.contactChange,"tab"==i.kind&&"tab1"==i.type){const t=i.propsData.tabsConfig.value||[],e=tt.A.getConfig().container;t.forEach((t=>{const a=JSON.parse(JSON.stringify({name:e.name,kind:e.kind,componentsName:e.componentsName,type:e.childs.container1.type,moduleName:e.childs.container1.moduleName||"",disableData:e.childs.container1.disableData,propsData:e.childs.container1.propsData,extraData:e.childs.container1.extraData,eventData:e.childs.container1.eventData,requestData:e.childs.container1.requestData,treeSelectMask:!1}));a.contactChange=e.contactChange,t.children.value=[a]}))}this.$emit("select",i)}},computed:{previewStyle(){const t=et(this.configData);return t?{background:t}:{}},normalConfig(){return tt.A.getConfig()}},mounted(){this.editModuleKind&&(this.activeName=this.editModuleKind)}},ut=pt,ht=(0,m.A)(ut,Y,Z,!1,null,"4803b0da",null),mt=ht.exports,gt=function(){var t=this,e=t._self._c;return"tree"!=t.editType?e("div",{staticClass:"page_see_btns",class:"btns_"+(t.type||"module")},["container"==t.type?e("el-button",{staticClass:"button",attrs:{size:"mini",plain:""},on:{click:function(e){return e.stopPropagation(),t.clickHandler("select")}}},[t._v(" "+t._s(t.moduleName||"容器")+" ")]):t._e(),e("el-button",{staticClass:"button",attrs:{size:"mini",type:"primary"},on:{click:function(e){return e.stopPropagation(),t.clickHandler("before")}}},[t._v("前添加")]),"container"==t.type?e("el-button",{staticClass:"button",attrs:{size:"mini",type:"primary"},on:{click:function(e){return e.stopPropagation(),t.clickHandler("in")}}},[t._v(" 内部 ")]):t._e(),e("el-button",{staticClass:"button",attrs:{size:"mini",type:"primary"},on:{click:function(e){return e.stopPropagation(),t.clickHandler("after")}}},[t._v("后添加")]),"container"!=t.type?e("el-button",{staticClass:"button",attrs:{size:"mini",plain:""},on:{click:function(e){return e.stopPropagation(),t.clickHandler("select")}}},[t._v(" "+t._s(t.moduleName||"组件")+" ")]):t._e()],1):t._e()},ft=[],Dt={name:"HandleModules",props:["type","moduleName","editType","treeSelectMask"],methods:{clickHandler(t){this.$emit("select",t)}}},vt=Dt,yt=(0,m.A)(vt,gt,ft,!1,null,"b661635a",null),bt=yt.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn_add_container"},[t._m(0),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.onClick.apply(null,arguments)}}},[t._v("开始添加")])],1)},kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_no_position"},[e("img",{attrs:{src:"https://cdn.pokekara.com/int/webkara/pstatic/nodata_cu.png"}})])}],Ct={name:"BtnAdd",props:["msg"],methods:{onClick(t){this.$emit("select",t)}}},St=Ct,wt=(0,m.A)(St,_t,kt,!1,null,"780c1289",null),xt=wt.exports,Ot={name:"HandlePreview",props:{config:{type:Array,default:()=>[]},editType:{type:String,default:()=>""},configData:{type:Object,default:()=>({})},evtId:{type:String,default:()=>"0"}},components:{...at.A,HandleModules:bt,BtnAdd:xt},data:()=>({}),computed:{colorList(){return this.configData.all?st(this.configData.all.styleData.colorList.value):[]}},methods:{getResetColorValue(t){const e=JSON.parse(JSON.stringify(t));if(e&&"object"==typeof e)if(e.constructor==Object){for(const t in e)Object.hasOwnProperty.call(e,t)&&"object"==typeof e[t]&&(e[t]=this.getResetColorValue(e[t]));if("color"==e.type&&e.value.indexOf("#")<0){let t={};for(let a=0;a<this.colorList.length;a++){const i=this.colorList[a];if(i.keys==e.value){t=i;break}}t.color&&(e.value=t.color)}}else if(e.constructor==Array){let t=[];return e.forEach((e=>{t.push(this.getResetColorValue(e))})),t}return e},getHandleBtns(t,e,a,i){return t("HandleModules",{slot:"handle",props:{type:a,moduleName:e.name,editType:this.editType,treeSelectMask:e.treeSelectMask||!1},on:{select:i}})},getSelectedStyle(t){return t.treeSelectMask?{outline:"2px solid red",margin:"2px"}:{}},getChildProps(t){return{type:t.type,editType:this.editType,staticData:{data:{evt_id:this.evtId||"0"},disableData:t.disableData,propsData:st(this.getResetColorValue(t.propsData)),eventData:st(t.eventData),requestData:st(t.requestData)}}},getChilds(t,e,a){if(e&&e.length>0){const i=[];return e.forEach(((s,n)=>{if("tab"==s.kind){const o=[];o.push(t(s.componentsName,{key:s.kind+"_"+s.type+"_"+a+"_"+n,props:this.getChildProps(s),style:this.getSelectedStyle(s),attrs:{key:s.kind+"_"+s.type+"_"+a+"_"+n},nativeOn:{click:t=>{t.stopPropagation(),this.$emit("select","select",e,n)}},on:{input:t=>{t!=s.disableData.normalIndex&&(s.disableData={...s.disableData,normalIndex:t})}}},[this.getHandleBtns(t,s,"",(t=>{this.$emit("select",t,e,n)}))]));const l=s.disableData.normalIndex,r=s.propsData.tabsConfig.value,c=r[l].children.value;o.push(this.getChilds(t,c,l)),i.push(t("div",{},o))}else"container"==s.kind?i.push(t(s.componentsName,{key:s.kind+"_"+s.type+"_"+a+"_"+n,props:this.getChildProps(s),style:this.getSelectedStyle(s),attrs:{key:s.kind+"_"+s.type+"_"+a+"_"+n},nativeOn:{click:t=>{t.stopPropagation(),this.$emit("select","select",e,n)}}},[this.getChilds(t,s.propsData.children.value,0),this.getHandleBtns(t,s,"container",(t=>{this.$emit("select",t,e,n)}))])):s.componentsName?i.push(t(s.componentsName,{key:s.kind+"_"+s.type+"_"+a+"_"+n,props:this.getChildProps(s),style:this.getSelectedStyle(s),attrs:{key:s.kind+"_"+s.type+"_"+a+"_"+n},nativeOn:{click:t=>{t.stopPropagation(),this.$emit("select","select",e,n)}}},[this.getHandleBtns(t,s,"",(t=>{this.$emit("select",t,e,n)}))])):this.editType&&"handle"===this.editType&&(console.log("错误组件",e,n),i.push(t("div",{},"错误组件"+s.type)))})),i}return this.editType&&"handle"===this.editType?t("BtnAdd",{on:{select:t=>{console.log("kind",t),this.$emit("select","after",e,0)}}}):t("div",{},[])}},render(t){return t("div",{},[this.getChilds(t,this.config,0)])}},Nt={name:"PageSee",props:{config:{type:Array,default:()=>[]},configData:{type:Object,default:()=>({})}},data:()=>({editData:{},addKind:"",showKind:"",children:[],childrenIndex:0,addTitle:"",editModuleKind:"rule"}),components:{PageSeeEdit:X,PageSeeAdd:mt,PagePreview:Ot},methods:{handleSelect(t,e,a){if("select"==t)this.children=e,this.childrenIndex=a,this.editData=e[a],this.showKind="edit",this.editData.treeSelectMask||(this.$root.componentSelectedDom&&(this.$root.componentSelectedDom.treeSelectMask=!1),this.editData.treeSelectMask=!0,this.$root.componentSelectedDom=this.editData);else{this.addKind=t,this.children=e,this.childrenIndex=a,this.editData=e[a],this.showKind="add";let i=(this.editData||{}).name||"占位";"before"==t?i+="之前":"after"==t?i+="之后":"in"==t&&(i+="内部"),i+="添加组件",this.addTitle=i}},onDelete(t){console.log(t),this.editModuleKind=this.children[this.childrenIndex].kind;const e=this.children;e.splice(this.childrenIndex,1),this.children=e,this.showKind="add"},resetShowIndex(){this.editData.disableData.normalIndex=0},onAddComplate(t){const e=this.children;if("before"==this.addKind)e.splice(this.childrenIndex,0,t);else if("after"==this.addKind)e.splice(this.childrenIndex+1,0,t);else if("in"==this.addKind){const a=e[this.childrenIndex];if("tab"==a.kind){const e=a.disableData.normalIndex,i=a.propsData.tabsConfig.value[e].children.value;i.push(t)}else a.propsData.children.value=a.propsData.children.value||[],a.propsData.children.value.push(t)}else e.splice(this.childrenIndex,0,t);this.childrenIndex=this.childrenIndex+1,this.children=e}},computed:{pageStyle(){const t=et(this.configData);return t?{background:t}:{}}}},Pt=Nt,It=(0,m.A)(Pt,H,F,!1,null,"7f33f6d2",null),$t=It.exports,At=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_tree_container"},[e("div",{staticClass:"edit_top"},[e("div",{staticClass:"phone_container"},[t._m(0),e("div",{staticClass:"phone_win"},[e("HandlePreview",{staticClass:"preview_content",style:t.pageStyle,attrs:{config:t.config,configData:t.configData,editType:"tree"},on:{select:t.onPreviewSelect}})],1)]),e("div",{staticClass:"handle_edit"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Top Left 提示文字",placement:"top-start"}},[e("template",{slot:"content"},t._l(t.instructions,(function(a,i){return e("div",{key:i},[t._v(" "+t._s(a)+" ")])})),0),e("el-link",{attrs:{type:"primary"}},[t._v("使用说明")])],2),e("el-input",{ref:"input_dom",staticClass:"input_dom",attrs:{size:"mini",type:"textarea",rows:2,placeholder:"此处粘贴复制过来的组件"},model:{value:t.copyNodeStr,callback:function(e){t.copyNodeStr=e},expression:"copyNodeStr"}}),e("el-divider",{attrs:{"content-position":"left"}}),e("div",{staticClass:"edit_container"},[e("el-tree",{attrs:{data:t.pageDomTree,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,draggable:"","allow-drop":t.allowDrop,"allow-drag":t.allowDrag},on:{"node-drop":t.handleDrop,"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function({node:a}){return e("span",{staticClass:"custom-tree-node",class:{select:a.data.currentDom.treeSelectMask}},[e("span",[t._v(t._s(a.label))]),a.data.labelTip?e("span",{staticClass:"tip"},[t._v("("+t._s(a.data.labelTip)+")")]):t._e(),e("span",{staticClass:"handle_ct"},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),(()=>t.copyDom(a)).apply(null,arguments)}}},[t._v(" 复制 ")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),(()=>t.deleteDom(a)).apply(null,arguments)}}},[t._v(" 删除 ")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),(()=>t.jsonCopyDom(a)).apply(null,arguments)}}},[t._v(" 剪切板复制 ")]),t.copyNodeStr?e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),(()=>t.jsonPasteDom(a)).apply(null,arguments)}}},[t._v(" 剪切板粘贴(下部) ")]):t._e()],1)])}}])})],1)],1)]),e("input",{ref:"copy_input",staticClass:"copy_area",attrs:{type:"text",value:""}})])},Tt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone_bg"},[e("img",{attrs:{src:"//www.metwo.cn/resource/phone.png"}})])}],jt={name:"PageTree",props:{config:{type:Array,default:()=>[]},configData:{type:Object,default:()=>({})}},data:()=>({numIndex:0,copyNodeStr:"",instructions:["1, 左侧为预览页面，右侧为现有页面内部的组件层级树","2, 复制：同步在下方复制出来一个相同的模块","3, 删除：删除指定的模块","4, 支持组件拖动排序等等，操作后看左边的效果是否成功","5, 左侧组件点击选中后右侧对应组件会出现红色名称标识，方便快速定位","6, 第三方组件逻辑，可能操作不成功，再重新操作一次","7, 使用剪切板粘贴时一定要注意粘贴的位置，展示位置同复制产生的位置相同"]}),components:{HandlePreview:Ot},methods:{jsonCopyDom(t){const e=JSON.stringify(t.data.currentDom),a=this.$refs.copy_input;a.value=e,a.select(),document.execCommand("copy"),this.$notify({title:"复制成功",message:"去对应位置粘贴吧"})},jsonPasteDom(t){try{const e=JSON.parse(this.copyNodeStr);this.copyNodeStr="",e.treeSelectMask&&(e.treeSelectMask=!1),t.data.parentDom.splice(t.data.currentDomIndex+1,0,e)}catch(e){this.$notify({title:"出错",message:"检查复制内容是否正确，或找技术"})}},copyDom(t){const e=JSON.parse(JSON.stringify(t.data.currentDom));e.treeSelectMask=!1,t.data.parentDom.splice(t.data.currentDomIndex+1,0,e)},deleteDom(t){t.data.parentDom.length<=1&&!t.data.currentDom.kind&&"{}"!==JSON.stringify(t.data.currentDom)?this.$notify({title:"错误",message:"tab组件至少需要一个tab",type:"error"}):t.data.parentDom.splice(t.data.currentDomIndex,1)},getDomTree(t){const e=[];return t&&t.length>0&&t.forEach(((a,i)=>{let s=[];if(a&&a.kind&&a.type){if("tab"==a.kind){const t=a.propsData.tabsConfig.value;s=this.getDomTree(t)}else if("container"==a.kind){const t=a.propsData.children.value;s=this.getDomTree(t)}e.push({id:a.name+"_"+this.numIndex,label:a.name,labelTip:a.moduleName||"",children:s,parentDom:t,currentDom:a,currentDomIndex:i})}else if("{}"==JSON.stringify(a))e.push({id:"error_"+this.numIndex,label:"错误组件",children:[],parentDom:t,currentDom:a,currentDomIndex:i}),this.numIndex=this.numIndex+1;else{let s=(a.tabName||{}).value||"";s||(s="图片tab_"+i),e.push({id:s+"_"+this.numIndex,label:s,children:this.getDomTree((a.children||{}).value||[]),parentDom:t,currentDom:a,currentDomIndex:i}),this.numIndex=this.numIndex+1}this.numIndex=this.numIndex+1})),e},handleDrop(t,e,a){if("inner"==a){const a=JSON.parse(JSON.stringify(t.data.currentDom));if("container"==e.data.currentDom.kind){const i=e.data.currentDom.propsData.children;i.value.push(a),e.data.currentDom.propsData.children=i,t.data.parentDom.splice(t.data.currentDomIndex,1)}else if(e.data.currentDom.children){const i=e.data.currentDom.children;i.value.push(a),e.data.currentDom.children=i,t.data.parentDom.splice(t.data.currentDomIndex,1)}else console.error("出错！！！ --请尽快找技术看下--")}else if("before"==a){const a=JSON.parse(JSON.stringify(t.data.currentDom)),i=t.data.parentDom.length;e.data.parentDom.splice(e.data.currentDomIndex,0,a),this.$nextTick((()=>{i<t.data.parentDom.length&&e.data.currentDomIndex<t.data.currentDomIndex?t.data.parentDom.splice(t.data.currentDomIndex+1,1):t.data.parentDom.splice(t.data.currentDomIndex,1)}))}else if("after"==a){const a=JSON.parse(JSON.stringify(t.data.currentDom)),i=t.data.parentDom.length;e.data.parentDom.splice(e.data.currentDomIndex+1,0,a),this.$nextTick((()=>{i<t.data.parentDom.length&&e.data.currentDomIndex<t.data.currentDomIndex?t.data.parentDom.splice(t.data.currentDomIndex+1,1):t.data.parentDom.splice(t.data.currentDomIndex,1)}))}},allowDrop(t,e,a){return t.data.currentDom.kind?e.data.currentDom.kind?"tab"!==e.data.currentDom.kind&&("container"===e.data.currentDom.kind||"inner"!==a):"inner"==a:!e.data.currentDom.kind&&"inner"!==a},allowDrag(t){return console.log(t),!0},handleNodeClick(t,e){console.log(e);const a=t.currentDom;a.kind&&a.type&&(this.$root.componentSelectedDom&&this.$root.componentSelectedDom.treeSelectMask&&(this.$root.componentSelectedDom.treeSelectMask=!1),a.treeSelectMask=!0,this.$root.componentSelectedDom=a)},onPreviewSelect(t,e,a){this.$root.componentSelectedDom&&this.$root.componentSelectedDom.treeSelectMask&&(this.$root.componentSelectedDom.treeSelectMask=!1);const i=e[a];i.treeSelectMask=!0,this.$root.componentSelectedDom=i}},computed:{pageStyle(){const t=et(this.configData);return t?{background:t}:{}},pageDomTree(){return this.config&&this.config.length>0?this.getDomTree(this.config):[]}}},Jt=jt,Lt=(0,m.A)(Jt,At,Tt,!1,null,"532dc849",null),Mt=Lt.exports,zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_update_container"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Top Left 提示文字",placement:"top-start"}},[e("template",{slot:"content"},t._l(t.instructions,(function(a,i){return e("div",{key:i},[t._v(t._s(a))])})),0),e("el-link",{attrs:{type:"primary"}},[t._v("使用说明")])],2),e("el-divider",{attrs:{"content-position":"left"}}),e("el-form",{attrs:{"label-position":"top","label-width":"200px"}},[e("el-form-item",{attrs:{label:"选择组件以及修改的字段值"}},[e("el-cascader",{staticClass:"cascader",attrs:{"popper-class":"position-select-card",size:"mini",options:t.optionsList},on:{change:t.handleChange},model:{value:t.selectList,callback:function(e){t.selectList=e},expression:"selectList"}})],1),e("el-form-item",{attrs:{label:"选择想要修改的字段值"}},[e("BaseForm",{attrs:{data:t.editData,pageAllStyle:t.getConfigAll},on:{change:t.onChange}})],1),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.toUpdate}},[t._v("同步所有组件")])],1)],1)},Et=[],qt={name:"PageUpdate",props:{configData:{type:Object,default:()=>({})}},data:()=>({instructions:["1, 左侧输入数据，能把页面上的所有的内容同步更新成这个数据","2, 做此操作前，先保存数据","3, 配置有联动数据的不能改","4, 适合场景， 多榜单页面复用上线时更新榜单的时间，倒计时时间等等"],normalProps:tt.A.getConfig(),selectList:[],optionsList:[],editData:{}}),components:{BaseForm:J},computed:{getConfigAll(){return this.configData.all&&this.configData.all.styleData?JSON.parse(JSON.stringify(this.configData.all.styleData)):{}}},methods:{onChange(t){this.editData.value=t.value},handleChange(t){if(t&&t.length>=3){const e=t[0]||"",a=t[1]||"",i=t[2]||"";this.editData=((this.normalProps[e]||{}).childs[a]||{}).propsData[i]||{}}else this.editData={}},toUpdate(){if(this.selectList&&this.selectList.length>=3){const t=this.selectList[0]||"",e=this.selectList[1]||"",a=this.selectList[2]||"";this.toUpdateDom(this.configData.pageConfig,t,e,a),this.$notify.success({title:"批量更新",message:"同步完成"})}else this.$notify.info({title:"批量更新",message:"先选择要更新的组件"})},toUpdateDom(t,e,a,i){t&&t.length>0&&t.forEach((t=>{if(t&&t.kind&&t.type){if(t.kind==e&&t.type==a&&(t.propsData[i].value=this.editData.value),"tab"==t.kind){const s=t.propsData.tabsConfig.value;this.toUpdateDom(s,e,a,i)}else if("container"==t.kind){const s=t.propsData.children.value;this.toUpdateDom(s,e,a,i)}}else this.toUpdateDom(t.children.value,e,a,i)}))}},mounted(){const t=[];for(const e in this.normalProps)if(Object.hasOwnProperty.call(this.normalProps,e)){const a=this.normalProps[e],i=[];for(const t in a.childs)if(Object.hasOwnProperty.call(a.childs,t)){const e=a.childs[t],s=[];for(const t in e.propsData)if(Object.hasOwnProperty.call(e.propsData,t)){const a=e.propsData[t];a.noDisplay||a.checkChange||s.push({label:a.tip,value:t,data:a})}i.push({label:e.moduleName,value:e.type,children:s})}t.push({label:a.name,value:a.kind,children:i})}this.optionsList=t}},Ut=qt,Kt=(0,m.A)(Ut,zt,Et,!1,null,"10bb8115",null),Vt=Kt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page_write_container"},[e("JsonEditor",{attrs:{width:"auto",type:1},model:{value:t.newValue,callback:function(e){t.newValue=e},expression:"newValue"}})],1)},Ft=[],Bt={name:"PageWrite",props:["config"],data:()=>({}),components:{JsonEditor:$},computed:{newValue:{set(t){rt(t,this.$root.pageId),this.$emit("change",t)},get(){return this.config||{}}}},methods:{},mounted(){}},Rt=Bt,Wt=(0,m.A)(Rt,Ht,Ft,!1,null,"1225c40c",null),Gt=Wt.exports,Qt=a(77084);const Xt="__page_checkout_save_config__";async function Yt(t,e){return"localhost"==window.location.hostname?new Promise((function(a,i){if(window.localStorage)try{const i=JSON.stringify(e);window.localStorage.setItem(Xt+t,i),console.log("本地保存数据"),window.alert("保存成功"),a()}catch(s){i("出错"),console.log("出错",s)}})):new Promise((function(a,i){Qt.A.post("/page/add/detail",{id:t,msg:JSON.stringify(e)},((t,e)=>{1==t?(window.alert("保存成功"),a()):i(e.msg)}))}))}async function Zt(t){if("localhost"==window.location.hostname){if(window.localStorage){const a=window.localStorage.getItem(Xt+t);if(!a)return{};try{const e=JSON.parse(a);return console.log("本地读取数据",t),e||{}}catch(e){console.log("出错",e)}}return{}}return new Promise((function(e,a){Qt.A.get("/page/get/detail",{id:t},((t,i)=>{if(1==t){const t=((i.data.list||[])[0]||{}).page_msg||"",a=JSON.parse(t);e(a)}else a("")}))}))}var te=a(38640);function ee(t,e){Qt.A.get("/user/get/name/detail",{user_name:t,user_pass:e}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))}function ae(t){const e=te.A.getToken();e?Qt.A.get("/user/get/token/detail",{},t):t(0,{})}var ie={toLogin:ee,autoLogin:ae},se=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-dialog-ct"},[e("div",{staticClass:"login-content"},[e("div",{staticClass:"text"},[t._v("用户名")]),e("div",{staticClass:"input-ct"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"text"},[t._v("密码")]),e("div",{staticClass:"input-ct"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"btn-ct"},[e("div",{staticClass:"btn out",on:{click:t.toCancel}},[t._v("取消")]),e("div",{staticClass:"btn",class:t.username&&t.password?"":"disable",on:{click:t.toSign}},[t._v("注册")]),e("div",{staticClass:"btn",class:t.username&&t.password?"":"disable",on:{click:t.toLogin}},[t._v("登录")])])])])},ne=[],oe={name:"LoginDialog",data:()=>({username:"",password:""}),components:{},methods:{toSign(){this.$request.post("/user/add/detail",{user_name:this.username,user_pass:this.password},((t,e)=>{if(1==t){const t=e.data.user.token||"";te.A.setToken(t)}this.$emit("ok",t,e)}))},toLogin(){this.$request.get("/user/get/name/detail",{user_name:this.username,user_pass:this.password},((t,e)=>{if(1==t){const t=e.data.user.token||"";te.A.setToken(t)}this.$emit("ok",t,e)}))},toCancel(){this.$emit("cancel")}},mounted(){}},le=oe,re=(0,m.A)(le,se,ne,!1,null,"9c4bf258",null),ce=re.exports,de={name:"App",data:()=>({loaded:!1,configData:{},tabName:"tab1",showLoginDialog:!1}),components:{PageAll:V,PageWrite:Gt,PageTree:Mt,PageUpdate:Vt,PageSee:$t,LoginDialog:ce},methods:{async getConfig(){if(this.$root.pageId){const t=await Zt(this.$root.pageId);console.log("download data, this is can edit for developer",t),this.configData=ot(t,this.$root.pageId)}else this.configData=ot({},this.$root.pageId);this.loaded=!0},toSave(){const t=ct(this.configData);if(t&&t.length>0){const e="<div>"+t.join("<br>")+"</div>";this.$confirm(e,"请确认以下配置不完整内容",{dangerouslyUseHTMLString:!0,confirmButtonText:"继续提交",cancelButtonText:"返回编辑",type:"warning"}).then((()=>{this.toSendSaveData()})).catch((()=>{}))}else this.toSendSaveData()},toSendSaveData(){this.$root.componentSelectedDom.treeSelectMask=!1,rt(this.configData,this.$root.pageId);const t=lt(this.configData);console.log("save data, this is can edit for developer",this.configData),Yt(this.$root.pageId,t).then((e=>{this.configData.staticData=t.staticData,console.log(e)})).catch((t=>{t&&window.alert(t)}))},reloadPage(){this.$root.pageId?window.location.reload():alert("地址错误")},toPreview(){if(!this.$root.pageId)return void alert("页面错误，不能预览，缺少evt_id");const t=this.getPreviewUrl();window.open(t)},toCopyLink(){if(!this.$root.pageId)return void alert("页面错误，不能复制，缺少evt_id");const t=this.getPreviewUrl(),e=this.$refs.copy_input;e.value=t,e.select(),document.execCommand("copy"),this.$notify({title:"复制链接成功",message:t})},getPreviewUrl(){return this.$root.pageId?this.configData.all&&this.configData.all.propsData&&this.configData.all.propsData.pageUrl&&this.configData.all.propsData.pageUrl.value?this.configData.all.propsData.pageUrl.value.indexOf("id")>0?this.configData.all.propsData.pageUrl.value:this.configData.all.propsData.pageUrl.value+"?id="+this.$root.pageId:"./auto_active.html?id="+this.$root.pageId:""},configChange(t){t&&(this.configData=t)},tabChange(t,e){console.log(t,e)},loginSuccess(t,e){this.showLoginDialog=1!=t},toCancel(){this.showLoginDialog=!1}},mounted(){this.getConfig(),this.tabName=this.$root.tabName||"tab1",ie.autoLogin(this.loginSuccess)}},pe=de,ue=(0,m.A)(pe,o,l,!1,null,null,null),he=ue.exports,me=a(31052),ge=a.n(me),fe=a(17318),De=a(75364);n["default"].prototype.$request=Qt.A,n["default"].use(ge()),n["default"].use(fe.A,{preLoad:1.3,error:"https://cdn.pokekara.com/int/webkara/pstatic/user.png",loading:"https://cdn.pokekara.com/int/webkara/pstatic/user.png",attempt:1});const{id:ve="1"}=(0,De.qI)();new n["default"]({data(){return{pageId:ve,componentSelectedDom:{}}},method:{},created(){},render:t=>t(he)}).$mount("#app")}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,i,s,n){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],s=t[d][1],n=t[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[r])}))?i.splice(r--,1):(l=!1,n<o&&(o=n));if(l){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,i){return a.f[i](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".0d4d6d24.js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="tools:";a.l=function(i,s,n,o){if(t[i])t[i].push(s);else{var l,r;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var p=c[d];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==e+n){l=p;break}}l||(r=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",e+n),l.src=i),t[i]=[s];var u=function(e,a){l.onerror=l.onload=null,clearTimeout(h);var s=t[i];if(delete t[i],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach((function(t){return t(a)})),e)return e(a)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),r&&document.head.appendChild(l)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.j=915}(),function(){a.p="/pages/tool/assets/"}(),function(){var t={915:0};a.f.j=function(e,i){var s=a.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else{var n=new Promise((function(a,i){s=t[e]=[a,i]}));i.push(s[2]=n);var o=a.p+a.u(e),l=new Error,r=function(i){if(a.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,s[1](l)}};a.l(o,r,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,o=i[0],l=i[1],r=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(r)var d=r(a)}for(e&&e(i);c<o.length;c++)n=o[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(d)},i=self["webpackChunktools"]=self["webpackChunktools"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504,996],(function(){return a(3723)}));i=a.O(i)})();
//# sourceMappingURL=page_config.1fbf4ed3.js.map